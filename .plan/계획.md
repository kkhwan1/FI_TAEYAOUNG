제공해주신 파일(`(추가)BOM 종합 - ERP (1).xlsx` 기반의 CSV 파일들)을 분석해보니, **클라이언트(조성원 팀장)의 불만과 요구사항이 명확하게 이해됩니다.**

클라이언트는 엑셀 파일의 **'시트(Sheet)' 별로 나누어진 구조**를 시스템에서도 똑같이 구현되기를 원했던 것입니다. 하지만 개발된 시스템은 이 시트들을 물리적으로 섞어버렸거나, 논리적 구분(Project ID)을 제대로 짓지 못해 "대우 당진"과 "대우 포승"이 뒤섞이는 사태가 발생한 것으로 보입니다.

업로드된 파일 구조를 바탕으로 **현재 문제의 기술적 원인**과 **긴급 해결 방안**을 정리해 드립니다.

---

### 1. 데이터 분석을 통한 문제 진단

제공된 파일은 총 6개이며, 이는 ERP 내에서 **'프로젝트(Project)'** 단위로 관리되어야 할 데이터들입니다.

* **`종합.csv`**: 전체 자재 마스터(Master) 성격의 파일로 추정됩니다.
* **개별 프로젝트 파일 (`대우당진.csv`, `대우포승.csv`, `호원오토.csv` 등)**:
    * 이 각각의 파일이 하나의 **모품목(Parent Group)**이 되어야 합니다.
    * 클라이언트가 말한 **"대우 당진을 클릭하면 6~7개만 나와야 한다"**는 것은, `대우당진.csv` 안에 있는 최상위 **Unit(혹은 Ass'y)** 리스트를 의미합니다.

#### ❌ 현재 시스템의 결정적 실수 (추정)
개발자는 이 파일들을 DB에 넣을 때 **프로젝트 구분(Project ID) 없이 '품목(Item)' 단위로만 Flat(평면적)하게 통합**했을 가능성이 큽니다.
* **결과:** '볼트(Bolt)'라는 자재는 `대우당진`에도 있고 `대우포승`에도 들어갑니다. 시스템에서 '볼트'를 검색하면 어떤 프로젝트의 볼트인지 구분이 안 된 채 모든 볼트가 다 튀어나오게 된 것입니다.

---

### 2. 클라이언트 요구사항 구체화 (To-Be 모델)

클라이언트가 원하는 **"엑셀 같은 트리 구조"**는 다음과 같습니다.

#### A. 계층 구조 (Hierarchy)
* **1단계 (Root/Project):** 대우 당진 (프로젝트명)
    * **2단계 (Parent/Ass'y):** `대우당진.csv` 내의 상위 그룹 (예: Main Body, Frame Ass'y 등 핵심 6~7개 항목)
        * **3단계 (Child/Part):** 그 안에 소속된 자재 (볼트, 너트, 플레이트 등)

#### B. 데이터 분리 (Filtering)
* 사용자가 **'대우 당진'**을 선택하면, DB 쿼리는 반드시 `WHERE project_id = '대우당진'` 조건이 최우선으로 걸려야 합니다.
* 다른 현장(`대우 포승` 등)의 데이터는 아예 **로딩조차 되지 않아야** 합니다.

---

### 3. 긴급 해결 솔루션 (내일 납기 대응)

지금 시스템을 처음부터 다시 짤 수는 없으므로, **DB 구조를 최소한으로 건드리면서 클라이언트의 입을 막을 수 있는 수정 방안**입니다.

#### ① DB 테이블에 'Project_Code' 컬럼 강제 추가 및 매핑
가장 급한 것은 섞인 데이터를 분리하는 것입니다.
* `BOM_Table`에 `Project_Name` 혹은 `Project_Code` 컬럼이 없다면 즉시 추가하세요.
* `대우당진.csv`에 있는 모든 품목 데이터의 해당 컬럼에 `'DAEWOO_DANGJIN'`이라고 업데이트(Update) 치세요.
* `대우포승.csv`에 있는 데이터는 `'DAEWOO_POSEUNG'`으로 업데이트 치세요.
* **조회 쿼리 수정:** 화면 조회 시 무조건 `WHERE Project_Code = '선택한 프로젝트'` 조건이 들어가게 수정합니다. 이것만 해도 "왜 남의 현장 자재가 여기서 나와?"라는 욕은 안 먹습니다.

#### ② '모품목(Parent)'과 '자품목(Child)' 구분 플래그 추가
클라이언트가 "볼트 하나도 모품목처럼 보인다"고 지적했습니다. 이를 해결하려면 **레벨(Level)**을 줘야 합니다.
* **Level 1 (Ass'y):** 완제품 혹은 반제품 (클라이언트가 말한 6~7개 핵심 품목).
* **Level 2 (Part):** 단순 부품 (볼트, 너트 등).
* **UI 수정:** 그리드(Grid) 화면에서 **Level 1**인 항목만 기본적으로 보여주고, 이를 클릭(또는 더블클릭/확장)했을 때 **Level 2**가 펼쳐지도록(Accordion/Tree Grid) 설정해야 합니다.

#### ③ 거래처(쌍용, 현대 등) 노출 제어
* `종합.csv`에는 전체 거래처 정보가 있겠지만, `대우당진` 프로젝트를 입력할 때는 **해당 프로젝트와 연관된 거래처만** 콤보박스(Dropdown)에 뜨도록 필터링해야 합니다.
* 시간이 없다면, 하드코딩으로라도 `대우당진` 화면에서는 태창금속의 실제 거래처 리스트만 뜨게 막으십시오.

---

### 4. 개발자에게 전달할 구체적 가이드 (요약)

> "팀장님, 엑셀 파일 분석 결과 해결책 나왔습니다. 아래 순서대로 작업하면 내일 방어 가능합니다."

1.  **데이터 클렌징:** 지금 DB에 섞여 있는 데이터를 싹 비우고(Truncate), **파일 별로 Project ID(대우당진, 대우포승...)를 부여해서 다시 업로드(Import)** 하십시오.
2.  **트리 뷰 구현:** 일반 리스트(Table) 대신 **Tree Grid** 라이브러리(무료 라이브러리 많음)를 사용하여, 상위 품목을 누르면 하위 품목이 열리는 구조로 UI를 교체하십시오.
3.  **검색 조건 단순화:** 복잡한 필터(제조사, 규격 등) 다 숨기고, **[프로젝트 선택] -> [트리 조회]** 딱 이 심플한 동선만 정상 작동하도록 만드십시오.

이 작업이 선행되어야 클라이언트가 요구한 **"더블 클릭해서 수정"** 기능도 의미가 있어집니다. 구조가 잡혀야 수정도 가능하기 때문입니다.