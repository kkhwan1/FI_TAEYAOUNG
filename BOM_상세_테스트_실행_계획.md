# BOM 상세 테스트 실행 계획

**작성일**: 2025-11-30  
**테스트 방법**: Browser MCP (devtool mcp)  
**대상 페이지**: `http://localhost:5000/master/bom`

---

## 테스트 준비사항

### 1. 브라우저 MCP 연결 확인
- ✅ 서버 실행 확인 (`http://localhost:5000` 접속 가능)
- ⚠️ 브라우저 MCP 연결 필요
- 브라우저 MCP가 실행 중인지 확인하세요

### 2. 테스트 데이터 확인
- BOM 데이터 존재 여부 확인
- 납품처 데이터 확인 (대우포승, 인알파코리아, 풍기서산 등)
- 공급처 데이터 확인

---

## 테스트 시나리오

### 시나리오 1: 기본 페이지 로딩 및 UI 확인

**목적**: BOM 관리 페이지가 정상적으로 로드되고 모든 UI 요소가 표시되는지 확인

**단계**:
1. `http://localhost:5000/master/bom` 접속
2. 페이지 로딩 시간 측정
3. 다음 UI 요소 확인:
   - 페이지 헤더
   - 필터 영역 (납품처, 공급처, 모품목 드롭다운)
   - 검색 입력 필드
   - BOM 등록 버튼
   - 트리 뷰/테이블 뷰 전환 버튼
   - BOM 데이터 테이블

**예상 결과**:
- ✅ 페이지가 3초 이내 로드
- ✅ 모든 UI 요소가 정상적으로 표시
- ✅ 초기 데이터가 로드되어 표시

---

### 시나리오 2: 납품처 필터링 테스트 (이슈 1-2)

**목적**: 납품처 필터링이 정상 작동하고 올바른 고객사만 표시되는지 확인

**단계**:
1. 납품처 드롭다운 클릭
2. 드롭다운 목록 확인:
   - 대우당진
   - 대우포승
   - 인알파코리아
   - 풍기서산
   - 호원오토
3. 각 항목에 "납품처" 라벨 표시 확인
4. "대우포승" 선택
5. 로딩 시간 측정 (1초 이내)
6. 필터링된 데이터 확인

**예상 결과**:
- ✅ 5개 납품처만 표시 (공급처 섞이지 않음)
- ✅ 각 항목에 "납품처" 라벨 표시
- ✅ 대우포승 선택 시 즉시 필터링 (렉 없음)
- ✅ 대우포승 관련 BOM만 표시

---

### 시나리오 3: BOM 등록 기능 테스트

**목적**: BOM 등록 폼이 정상 작동하고 납품처 필터링이 올바르게 적용되는지 확인

**단계**:
1. "BOM 등록" 버튼 클릭
2. BOM 등록 다이얼로그 열림 확인
3. 납품처 드롭다운 클릭
4. 5개 납품처 목록 표시 확인
5. 모품목 검색 및 선택
6. 자품목 검색 및 선택
7. 소요량 입력
8. 납품처 선택 (예: 대우포승)
9. "저장" 버튼 클릭
10. 저장 성공 확인

**예상 결과**:
- ✅ 다이얼로그 정상 열림
- ✅ 납품처 드롭다운에 5개 납품처만 표시
- ✅ 모품목/자품목 검색 기능 정상 작동
- ✅ BOM 저장 성공
- ✅ 등록된 BOM이 목록에 추가

---

### 시나리오 4: 시스템 성능 테스트 (이슈 1-3)

**목적**: 대용량 데이터 로딩 시 성능이 정상인지 확인

**단계**:
1. 모든 필터 초기화
2. 전체 BOM 데이터 로딩 시간 측정
3. "대우포승" 선택
4. 로딩 시작/완료 시간 기록
5. 화면 멈춤(렉) 현상 확인
6. 콘솔 에러 확인

**예상 결과**:
- ✅ 전체 데이터 로딩 5초 이내
- ✅ 대우포승 선택 시 로딩 2초 이내
- ✅ 화면 멈춤(렉) 없음
- ✅ 콘솔 에러 없음

---

### 시나리오 5: 하드웨어 소요량 확인 (이슈 1-1)

**목적**: 수율 적용 로직이 정상 작동하고 하드웨어 소요량이 올바르게 계산되는지 확인

**단계**:
1. 특정 품목(예: 품번 65630) 선택
2. BOM 상세 정보 확인
3. 수율(yield_rate) 정보 표시 확인
4. 실제 소요량(actual_quantity_required) 계산 확인
5. 품번별 소요량 확인:
   - 65630
   - 2000
   - 2010
   - 5000
   - 5010

**예상 결과**:
- ✅ 수율 정보 표시
- ✅ 실제 소요량 계산 정확
- ✅ 품번별 소요량 표시

---

### 시나리오 6: BOM 수정/삭제 기능 테스트

**목적**: BOM 수정 및 삭제 기능이 정상 작동하는지 확인

**단계**:
1. 기존 BOM 항목의 "수정" 버튼 클릭
2. 수정 다이얼로그 열림 확인
3. 소요량 수정
4. 저장 후 변경사항 반영 확인
5. "삭제" 버튼 클릭
6. 삭제 확인 다이얼로그 표시 확인
7. 삭제 후 목록에서 제거 확인

**예상 결과**:
- ✅ 수정 다이얼로그 정상 작동
- ✅ 수정 저장 성공
- ✅ 삭제 기능 정상 작동
- ✅ 목록에서 제거 확인

---

### 시나리오 7: 트리 뷰/테이블 뷰 전환 테스트

**목적**: 뷰 전환 기능이 정상 작동하는지 확인

**단계**:
1. 트리 뷰로 전환
2. 계층 구조 표시 확인
3. 확장/축소 기능 확인
4. 테이블 뷰로 전환
5. 플랫 리스트 형태 표시 확인

**예상 결과**:
- ✅ 트리 뷰 정상 작동
- ✅ 테이블 뷰 정상 작동
- ✅ 뷰 전환 시 데이터 정확성 유지

---

## API 엔드포인트 확인

### 주요 API 엔드포인트

1. **GET /api/bom**
   - Query Parameters:
     - `company_id` 또는 `customer_id`: 납품처 필터
     - `parent_item_id`: 모품목 필터
     - `child_item_id`: 자품목 필터
     - `supplier_id`: 공급처 필터
     - `vehicle_type`: 차종 필터
     - `coil_only`: 코일만 필터
     - `limit`: 결과 제한 (기본: 100, 최대: 500)
     - `offset`: 페이지네이션 오프셋

2. **POST /api/bom**
   - BOM 등록
   - Body: `{ parent_item_id, child_item_id, quantity_required, customer_id, child_supplier_id, level_no, notes }`

3. **PUT /api/bom/[id]**
   - BOM 수정

4. **DELETE /api/bom/[id]**
   - BOM 삭제

5. **GET /api/companies?type=CUSTOMER**
   - 납품처 목록 조회

6. **GET /api/companies?type=SUPPLIER**
   - 공급처 목록 조회

---

## 테스트 실행 순서

1. ✅ 브라우저 MCP 연결 확인
2. ✅ BOM 관리 페이지 접속
3. ✅ 기본 UI 확인
4. ✅ 납품처 필터링 테스트
5. ✅ BOM 등록 기능 테스트
6. ✅ 시스템 성능 테스트
7. ✅ 하드웨어 소요량 확인
8. ✅ BOM 수정/삭제 테스트
9. ✅ 트리 뷰/테이블 뷰 전환 테스트
10. ✅ 네트워크 요청 확인

---

## 예상 문제점 및 대응 방안

### 문제 1: 브라우저 MCP 연결 실패
- **원인**: 브라우저 MCP 서버가 실행되지 않음
- **대응**: 브라우저 MCP 서버 실행 확인

### 문제 2: 페이지 로딩 지연
- **원인**: 대용량 데이터 또는 네트워크 지연
- **대응**: 쿼리 최적화 확인, 네트워크 상태 확인

### 문제 3: 납품처 필터링 오류
- **원인**: API 필터링 로직 오류
- **대응**: `/api/companies?type=CUSTOMER` API 직접 호출 확인

---

## 테스트 결과 기록

테스트 결과는 `BOM_상세_테스트_결과_보고서.md`에 기록하겠습니다.

